<!DOCTYPE html>
<html lang="zh-cn">
<head>
	<meta charset="utf-8">
	<title>Xiaosong's Case</title>
	<meta name="renderer" content="webkit">
	<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
	<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
	<meta name="author" content="xiaosong<lianghaisong@qq.com">
	<link rel="stylesheet" type="text/css" href="/framework/css/xs.css" />
	<style>
		.dplayer {
			border-radius: 6px;
		}

		.dplayer-logo {
			max-width: 120px !important;
		}
	</style>
</head>
<body>
	<div id="xs-app">
		<div class="xs-header">
			<div class="xs-header-left">
				<a href="/"><img src="/framework/images/logo_white.png" class="logo"></a>
			</div>
			<div class="slogan"></div>
			<div class="xs-header-right">
				<div class="xs-header-nav">
					<ul>
						<li><a href="/">首页</a></li>
					</ul>
				</div>
			</div>
		</div>

		<div class="wrapper">
			<div class="xs-title">
				<div class="xs-title-txt">Dplayer</div>
				<div class="xs-desc">HTML5 弹幕视频播放器</div>
			</div>
			<div class="dplayer" id="dplayer"></div>
		</div>
		<!--help-->
		<div class="wrapper">
			<table class="table margin-tb table-striped table-bordered table-hover">
				<thead>
					<tr>
						<th>名称</th>
						<th>默认值</th>
						<th>描述</th>
					</tr>
				</thead>
				<tbody>
					<tr>
						<td>container</td>
						<td>document.querySelector('.dplayer')</td>
						<td>播放器容器元素</td>
					</tr>
					<tr>
						<td>live</td>
						<td>false</td>
						<td>开启直播模式, 见<a href="https://dplayer.diygod.dev/zh/guide.html#%E7%9B%B4%E6%92%AD" target="_blank">#直播</a></td>
					</tr>
					<tr>
						<td>autoplay</td>
						<td>false</td>
						<td>视频自动播放</td>
					</tr>
					<tr>
						<td>theme</td>
						<td>'#b7daff'</td>
						<td>主题色</td>
					</tr>
					<tr>
						<td>loop</td>
						<td>false</td>
						<td>视频循环播放</td>
					</tr>
					<tr>
						<td>lang</td>
						<td>navigator.language.toLowerCase()</td>
						<td>可选值: 'en', 'zh-cn', 'zh-tw'</td>
					</tr>
					<tr>
						<td>screenshot</td>
						<td>false</td>
						<td>开启截图，如果开启，视频和视频封面需要允许跨域</td>
					</tr>
					<tr>
						<td>hotkey</td>
						<td>true</td>
						<td>开启热键，支持快进、快退、音量控制、播放暂停</td>
					</tr>
					<tr>
						<td>airplay</td>
						<td>false</td>
						<td>在 Safari 中开启 AirPlay</td>
					</tr>
					<tr>
						<td>chromecast</td>
						<td>false</td>
						<td>启用 Chromecast</td>
					</tr>
					<tr>
						<td>preload</td>
						<td>'auto'</td>
						<td>视频预加载，可选值: 'none', 'metadata', 'auto'</td>
					</tr>
					<tr>
						<td>volume</td>
						<td>0.7</td>
						<td>默认音量，请注意播放器会记忆用户设置，用户手动设置音量后默认音量即失效</td>
					</tr>
					<tr>
						<td>playbackSpeed</td>
						<td>[0.5, 0.75, 1, 1.25, 1.5, 2]</td>
						<td>可选的播放速率，可以设置成自定义的数组</td>
					</tr>
					<tr>
						<td>logo</td>
						<td>-</td>
						<td>在左上角展示一个 logo，你可以通过 CSS 调整它的大小和位置</td>
					</tr>
					<tr>
						<td>apiBackend</td>
						<td>-</td>
						<td>自定义获取和发送弹幕行为，见<a href="https://dplayer.diygod.dev/zh/guide.html#%E7%9B%B4%E6%92%AD" target="_blank">#直播</a></td>
					</tr>
					<tr>
						<td>preventClickToggle</td>
						<td>false</td>
						<td>阻止点击播放器时候自动切换播放/暂停</td>
					</tr>
					<tr>
						<td>video</td>
						<td>-</td>
						<td>视频信息</td>
					</tr>
					<tr>
						<td>video.quality</td>
						<td>-</td>
						<td>见<a href="https://dplayer.diygod.dev/zh/guide.html#%E6%B8%85%E6%99%B0%E5%BA%A6%E5%88%87%E6%8D%A2" target="_blank">#清晰度切换</a></td>
					</tr>
					<tr>
						<td>video.defaultQuality</td>
						<td>-</td>
						<td>见<a href="https://dplayer.diygod.dev/zh/guide.html#%E6%B8%85%E6%99%B0%E5%BA%A6%E5%88%87%E6%8D%A2" target="_blank">#清晰度切换</a></td>
					</tr>
					<tr>
						<td>video.url</td>
						<td>-</td>
						<td>视频链接</td>
					</tr>
					<tr>
						<td>video.pic</td>
						<td>-</td>
						<td>视频封面</td>
					</tr>
					<tr>
						<td>video.thumbnails</td>
						<td>-</td>
						<td>视频缩略图，可以使用 <a href="https://github.com/MoePlayer/DPlayer-thumbnails" target="_blank" rel="noopener noreferrer">DPlayer-thumbnails<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound">
										<path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path>
										<polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon>
									</svg> <span class="sr-only">(opens new window)</span></span></a> 生成</td>
					</tr>
					<tr>
						<td>video.type</td>
						<td>'auto'</td>
						<td>可选值: 'auto', 'hls', 'flv', 'dash', 'webtorrent', 'normal' 或其他自定义类型, 见<a href="https://dplayer.diygod.dev/zh/guide.html#mse-%E6%94%AF%E6%8C%81" target="_blank">#MSE
								支持</a></td>
					</tr>
					<tr>
						<td>video.customType</td>
						<td>-</td>
						<td>自定义类型, 见<a href="https://dplayer.diygod.dev/zh/guide.html#mse-%E6%94%AF%E6%8C%81" target="_blank">#MSE 支持</a></td>
					</tr>
					<tr>
						<td>subtitle</td>
						<td>-</td>
						<td>外挂字幕</td>
					</tr>
					<tr>
						<td>subtitle.url</td>
						<td><code>required</code></td>
						<td>字幕链接</td>
					</tr>
					<tr>
						<td>subtitle.type</td>
						<td>'webvtt'</td>
						<td>字幕类型，可选值: 'webvtt', 'ass'，目前只支持 webvtt</td>
					</tr>
					<tr>
						<td>subtitle.fontSize</td>
						<td>'20px'</td>
						<td>字幕字号</td>
					</tr>
					<tr>
						<td>subtitle.bottom</td>
						<td>'40px'</td>
						<td>字幕距离播放器底部的距离，取值形如: '10px' '10%'</td>
					</tr>
					<tr>
						<td>subtitle.color</td>
						<td>'#fff'</td>
						<td>字幕颜色</td>
					</tr>
					<tr>
						<td>danmaku</td>
						<td>-</td>
						<td>显示弹幕</td>
					</tr>
					<tr>
						<td>danmaku.id</td>
						<td><code>required</code></td>
						<td>弹幕池 id，必须唯一</td>
					</tr>
					<tr>
						<td>danmaku.api</td>
						<td><code>required</code></td>
						<td>见<a href="https://dplayer.diygod.dev/zh/guide.html#%E5%BC%B9%E5%B9%95%E6%8E%A5%E5%8F%A3" target="_blank">#弹幕接口</a></td>
					</tr>
					<tr>
						<td>danmaku.token</td>
						<td>-</td>
						<td>弹幕后端验证 token</td>
					</tr>
					<tr>
						<td>danmaku.maximum</td>
						<td>-</td>
						<td>弹幕最大数量</td>
					</tr>
					<tr>
						<td>danmaku.addition</td>
						<td>-</td>
						<td>额外外挂弹幕，见<a href="https://dplayer.diygod.dev/zh/guide.html#bilibili-%E5%BC%B9%E5%B9%95" target="_blank">#bilibili
								弹幕</a></td>
					</tr>
					<tr>
						<td>danmaku.user</td>
						<td>'DIYgod'</td>
						<td>弹幕用户名</td>
					</tr>
					<tr>
						<td>danmaku.bottom</td>
						<td>-</td>
						<td>弹幕距离播放器底部的距离，防止遮挡字幕，取值形如: '10px' '10%'</td>
					</tr>
					<tr>
						<td>danmaku.unlimited</td>
						<td>false</td>
						<td>海量弹幕模式，即使重叠也展示全部弹幕，请注意播放器会记忆用户设置，用户手动设置后即失效</td>
					</tr>
					<tr>
						<td>danmaku.speedRate</td>
						<td>1</td>
						<td>弹幕速度倍率，越大速度越快</td>
					</tr>
					<tr>
						<td>contextmenu</td>
						<td>[]</td>
						<td>自定义右键菜单</td>
					</tr>
					<tr>
						<td>highlight</td>
						<td>[]</td>
						<td>自定义进度条提示点</td>
					</tr>
					<tr>
						<td>mutex</td>
						<td>true</td>
						<td>互斥，阻止多个播放器同时播放，当前播放器播放时暂停其他播放器</td>
					</tr>
				</tbody>
			</table>
		</div>


	</div>
	<script type="text/javascript" src="/framework/lib/jquery/jquery.min.js"></script>
	<script type="text/javascript" src="/framework/lib//dplayer/hls.min.js"></script>
	<script type="text/javascript" src="/framework/lib//dplayer/DPlayer.min.js"></script>
	<script type="text/javascript">
		// https://interface.sina.cn/sports/caitong/get_live_play_info.d.json?program_id=50007448 福彩
		// https://interface.sina.cn/sports/caitong/get_live_play_info.d.json?program_id=50007449 体彩
	</script>
	<script type="text/javascript">
		const dp = new DPlayer({
			container: document.getElementById('dplayer'),
			live: false, // 是否直播
			autoplay: true, //视频自动播放
			theme: '#b7daff', //主题色
			loop: true, //视频循环播放
			hotkey: true, //开启热键，支持快进、快退、音量控制、播放暂停
			preload: 'auto', //视频预加载，可选值: 'none', 'metadata', 'auto'
			volume: 0, //默认音量，请注意播放器会记忆用户设置，用户手动设置音量后默认音量即失效
			mutex: true, // 同一页面只能播放一个视频，默认为 true
			live: true,
			screenshot: false, // 视频截图
			playbackSpeed: [0.5, 0.75, 1, 1.25, 1.5, 2, 3], //可选的播放速率，可以设置成自定义的数组
			logo: '/framework/images/logo.png', //
			video: {
				url: 'https://tv.cwl.gov.cn/channels/fckj/kjzb/m3u8:sd', //'/framework/video/wakawaka.mov',
				pic: "/framework/images/kjzb.jpg", // 视频封面
				// thumbnails: "/framework/video/wakawaka.jpg", // 每帧缩略图 npm install -g dplayer-thumbnails  dplayer-thumbnails -o ./thumbnails.jpg -q 60 demo.mp4
				// quality: [{
				// 		name: '1080P 超清',
				// 		url: '/framework/video/wakawaka.mov',
				// 		type: 'normal',
				// 	},
				// 	{
				// 		name: '720P 高清',
				// 		url: '/framework/video/wakawaka.mov',
				// 		type: 'normal',
				// 	},
				// 	{
				// 		name: '480P 清晰',
				// 		url: '/framework/video/wakawaka.mov',
				// 		type: 'normal',
				// 	},
				// ],
				// defaultQuality: 1,
				type: 'customHls',
				customType: {
					customHls: function(video, player) {
						const hls = new Hls();
						hls.loadSource(video.src);
						hls.attachMedia(video);
						// video.play();
						console.log(player);
					},
				},
			},
			contextmenu: [{
					text: 'Haisong.Net',
					link: 'https://www.haisong.net',
				},
				{
					text: 'Gitee',
					link: 'https://gitee.com/haisong/haisong'
					// click: (player) => {
					// 	console.log(player);
					// },
				},
			],
			// //自定义进度条提示点
			// highlight: [{
			// 		time: 20,
			// 		text: '这是第 20 秒',
			// 	},
			// 	{
			// 		time: 120,
			// 		text: '这是 2 分钟',
			// 	},
			// ],
		});
		dp.on('timeupdate', function() {
			// console.log('总时长：'+dp.video.duration);
			// console.log('当前播放时间：'+dp.video.currentTime);
		});
	</script>
</body>
</html>